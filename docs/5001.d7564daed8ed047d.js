"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5001],{5001:(R,w,d)=>{d.r(w),d.d(w,{PlayListDownloadPageModule:()=>H});var _=d(6895),M=d(433),n=d(4556),T=d(7551),c=d(655),I=d(3983),i=d(8256),C=d(6841),x=d(9449),D=d(2601),b=d(5126);function A(t,e){1&t&&i._UZ(0,"ion-icon",10)}function G(t,e){1&t&&i._UZ(0,"ion-icon",11)}function N(t,e){if(1&t){const o=i.EpF();i.TgZ(0,"ion-col",12)(1,"music",13,14),i.NdJ("OnEnd",function(){i.CHM(o);const s=i.oxw();return i.KtG(s.musicaTerminou())}),i.qZA()()}if(2&t){const o=e.$implicit;i.xp6(1),i.Q6J("data",o)}}let z=(()=>{class t{constructor(o){this.storage=o,this.musicas=[]}ngOnInit(){var o;return(0,c.mG)(this,void 0,void 0,function*(){null==(yield this.storage.get("musics"))&&(yield this.storage.set("musics",this.musicas)),this.musicas=yield this.storage.get("musics");let l=[],s="";for(s of this.musicas)-1!=this.data.video_ids.indexOf(null!==(o=s.videoId)&&void 0!==o?o:"")&&l.push(s);this.musicas=l,this.tocando=!1,this.tocando_id=0})}ngAfterViewInit(){console.log(this.musicasContainer.toArray()),this.MusicTocando=this.musicasContainer.toArray()[this.tocando_id]}musicaTerminou(){this.proximo()}loadPosition(){this.MusicTocando=this.musicasContainer.toArray()[this.tocando_id]}pp(){return(0,c.mG)(this,void 0,void 0,function*(){this.tocando&&(this.MusicTocando.playPause(),this.tocando=!1),this.loadPosition(),this.MusicTocando.playPause(),this.tocando=!0})}anterior(){return(0,c.mG)(this,void 0,void 0,function*(){this.tocando_id-1==-1&&(this.tocando_id=this.musicasContainer.length-1),this.tocando_id-=1,this.pp()})}proximo(){return(0,c.mG)(this,void 0,void 0,function*(){this.tocando_id==this.musicasContainer.length-1&&(this.tocando_id=0),this.tocando_id+=1,this.pp()})}}return t.\u0275fac=function(o){return new(o||t)(i.Y36(D.Ke))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-playlist"]],viewQuery:function(o,l){if(1&o&&i.Gf(b.V,5),2&o){let s;i.iGM(s=i.CRH())&&(l.musicasContainer=s)}},inputs:{data:"data"},decls:27,vars:6,consts:[[3,"alt","src"],["expand","block",3,"click"],["slot","icon-only","name","play-skip-back-sharp"],["name","pause-circle-outline",4,"ngIf"],["name","play-circle-outline",4,"ngIf"],["slot","icon-only","name","play-skip-forward-sharp"],["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","4",4,"ngFor","ngForOf"],["name","pause-circle-outline"],["name","play-circle-outline"],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","4"],[3,"data","OnEnd"],["musica",""]],template:function(o,l){1&o&&(i.TgZ(0,"ion-card"),i._UZ(1,"img",0),i.TgZ(2,"ion-card-header")(3,"ion-card-title"),i._uU(4),i.qZA()(),i.TgZ(5,"ion-card-content")(6,"ion-grid")(7,"ion-row")(8,"ion-col")(9,"ion-button",1),i.NdJ("click",function(){return l.anterior()}),i._UZ(10,"ion-icon",2),i.qZA()(),i.TgZ(11,"ion-col")(12,"ion-button",1),i.NdJ("click",function(){return l.pp()}),i.YNc(13,A,1,0,"ion-icon",3),i.YNc(14,G,1,0,"ion-icon",4),i.qZA()(),i.TgZ(15,"ion-col")(16,"ion-button",1),i.NdJ("click",function(){return l.proximo()}),i._UZ(17,"ion-icon",5),i.qZA()()()()(),i.TgZ(18,"ion-accordion-group")(19,"ion-accordion",6)(20,"ion-item",7)(21,"ion-label"),i._uU(22,"Musicas"),i.qZA()(),i.TgZ(23,"div",8)(24,"ion-grid")(25,"ion-row"),i.YNc(26,N,3,1,"ion-col",9),i.qZA()()()()()()),2&o&&(i.xp6(1),i.s9C("alt",l.data.title),i.s9C("src",l.data.thumbnail,i.LSH),i.xp6(3),i.Oqu(l.data.title),i.xp6(9),i.Q6J("ngIf",l.tocando),i.xp6(1),i.Q6J("ngIf",!l.tocando),i.xp6(12),i.Q6J("ngForOf",l.musicas))},dependencies:[n.We,n.eh,n.YG,n.PM,n.FN,n.Zi,n.Dq,n.wI,n.jY,n.gu,n.Ie,n.Q$,n.Nd,_.sg,_.O5,b.V]}),t})();const J=["viewPlayList"],O=["DownloadMusic"];function U(t,e){if(1&t&&(i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2),i.qZA()()),2&t){const o=e.$implicit;i.xp6(2),i.Oqu(null==o||null==o.snippet?null:o.snippet.title)}}function Y(t,e){if(1&t){const o=i.EpF();i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",9)(3,"ion-button",10),i.NdJ("click",function(){i.CHM(o);const s=i.oxw();return i.KtG(s.cancel())}),i._uU(4,"Cancel"),i.qZA()(),i.TgZ(5,"ion-title"),i._uU(6),i.qZA(),i.TgZ(7,"ion-buttons",11)(8,"ion-button",12),i.NdJ("click",function(){i.CHM(o);const s=i.oxw();return i.KtG(s.confirm())}),i._uU(9,"Confirm"),i.qZA()()()(),i.TgZ(10,"ion-content",13)(11,"ion-card"),i._UZ(12,"img",14)(13,"ion-card-header"),i.TgZ(14,"ion-card-content")(15,"ion-item")(16,"ion-list",15),i.YNc(17,U,3,1,"ion-item",16),i.qZA()()()()()}if(2&t){const o=i.oxw();i.xp6(6),i.hij("Download ",null==o.model_vars||null==o.model_vars.playlist_info||null==o.model_vars.playlist_info.snippet?null:o.model_vars.playlist_info.snippet.title,""),i.xp6(2),i.Q6J("strong",!0),i.xp6(4),i.s9C("src",null==o.model_vars||null==o.model_vars.playlist_info||null==o.model_vars.playlist_info.snippet||null==o.model_vars.playlist_info.snippet.thumbnails||null==o.model_vars.playlist_info.snippet.thumbnails.maxres?null:o.model_vars.playlist_info.snippet.thumbnails.maxres.url,i.LSH),i.xp6(4),i.Q6J("inset",!0),i.xp6(1),i.Q6J("ngForOf",o.videos)}}function F(t,e){if(1&t&&(i._UZ(0,"ion-header"),i.TgZ(1,"ion-content",13)(2,"ion-card"),i._UZ(3,"img",17),i.TgZ(4,"ion-card-header")(5,"ion-card-title"),i._uU(6,"DOWNLOADING ..."),i.qZA(),i.TgZ(7,"ion-card-subtitle"),i._uU(8),i.qZA()(),i.TgZ(9,"ion-card-content"),i._UZ(10,"ion-progress-bar",18),i.qZA()()()),2&t){const o=i.oxw();i.xp6(3),i.s9C("src",null==o.model_vars||null==o.model_vars.video_atual||null==o.model_vars.video_atual.snippet||null==o.model_vars.video_atual.snippet.thumbnails||null==o.model_vars.video_atual.snippet.thumbnails.maxres?null:o.model_vars.video_atual.snippet.thumbnails.maxres.url,i.LSH),i.xp6(5),i.Oqu(null==o.model_vars||null==o.model_vars.video_atual||null==o.model_vars.video_atual.snippet?null:o.model_vars.video_atual.snippet.title),i.xp6(2),i.Q6J("buffer",0)("value",o.model_vars.progress)}}function Q(t,e){if(1&t&&(i.TgZ(0,"ion-col",19),i._UZ(1,"app-playlist",20),i.qZA()),2&t){const o=e.$implicit;i.xp6(1),i.Q6J("data",o)}}const k=[{path:"",component:(()=>{class t{constructor(o,l,s){this.ytbInfo=o,this.YtbMusicDownload=l,this.storage=s,this.musicas=[],this.musicas_ids=[],this.playlists=[],this.videos=[],this.model_vars={playlist_info:{},playlist_ids:[],video_atual:{},img_source:"",title:"",author:"",progress:.1}}find(){return(0,c.mG)(this,void 0,void 0,function*(){if(this.searchbar.value){let o=this.searchbar.value,l=yield this.ytbInfo.getPlayList(o),s=yield this.ytbInfo.getPlayListItems(o);(null==s?void 0:s.items.length)>0&&(this.model_vars.playlist_info=null==l?void 0:l.items[0],this.videos=null==s?void 0:s.items,this.modal.present())}})}save(){return(0,c.mG)(this,void 0,void 0,function*(){yield this.storage.set("playlists",this.playlists),yield this.storage.set("musics",this.musicas)})}checkifExist(o){return!1}ngOnInit(){return(0,c.mG)(this,void 0,void 0,function*(){null==(yield this.storage.get("playlists"))&&(yield this.storage.set("playlists",this.playlists)),null==(yield this.storage.get("musics"))&&(yield this.storage.set("musics",this.musicas)),this.musicas=yield this.storage.get("musics");for(let o of this.musicas)this.musicas_ids.push(o.videoId);this.playlists=yield this.storage.get("playlists")})}cancel(){this.modal.dismiss(null,"cancel")}confirm(){var o,l,s,a,m,r,p,v,h,g,f,y,P,Z;return(0,c.mG)(this,void 0,void 0,function*(){this.model_vars.playlist_ids=[],this.modalMusicDownload.present(),this.modal.dismiss();let L=1;for(let u of this.videos)this.modalMusicDownload.isOpen||this.modalMusicDownload.present(),this.model_vars.progress=L/this.videos.length,this.model_vars.video_atual=u,-1==this.musicas_ids.indexOf(null===(l=null===(o=null==u?void 0:u.snippet)||void 0===o?void 0:o.resourceId)||void 0===l?void 0:l.videoId)?yield this.download_music(null===(a=null===(s=null==u?void 0:u.snippet)||void 0===s?void 0:s.resourceId)||void 0===a?void 0:a.videoId):console.log(`${null===(r=null===(m=null==u?void 0:u.snippet)||void 0===m?void 0:m.resourceId)||void 0===r?void 0:r.videoId} ja existe`),this.model_vars.playlist_ids.push(null===(v=null===(p=null==u?void 0:u.snippet)||void 0===p?void 0:p.resourceId)||void 0===v?void 0:v.videoId),L+=1;let j={title:null===(g=null===(h=this.model_vars.playlist_info)||void 0===h?void 0:h.snippet)||void 0===g?void 0:g.title,video_ids:this.model_vars.playlist_ids,videos:[],thumbnail:null===(Z=null===(P=null===(y=null===(f=this.model_vars.playlist_info)||void 0===f?void 0:f.snippet)||void 0===y?void 0:y.thumbnails)||void 0===P?void 0:P.high)||void 0===Z?void 0:Z.url};this.playlists.push(j),this.save()})}onWillDismiss(o){console.log(o)}download_music(o){var l,s;return(0,c.mG)(this,void 0,void 0,function*(){let a=yield this.YtbMusicDownload.getMusic(o);for(;"finished"!=a.stats;){let r=null===(l=a.progress)||void 0===l?void 0:l.estimative;null==r&&(r=3e3),yield new Promise(p=>setTimeout(p,r)),a=yield this.YtbMusicDownload.getMusic(o)}let m=I.s.compress(null!==(s=a.file)&&void 0!==s?s:"");yield this.storage.set(`m-c-${a.videoId}`,m),a.file=`m-c-${a.videoId}`,this.musicas.push(a),this.save()})}}return t.\u0275fac=function(o){return new(o||t)(i.Y36(C.I),i.Y36(x.s),i.Y36(D.Ke))},t.\u0275cmp=i.Xpm({type:t,selectors:[["app-play-list-download"]],viewQuery:function(o,l){if(1&o&&(i.Gf(J,7),i.Gf(O,7),i.Gf(n.VI,5)),2&o){let s;i.iGM(s=i.CRH())&&(l.modal=s.first),i.iGM(s=i.CRH())&&(l.modalMusicDownload=s.first),i.iGM(s=i.CRH())&&(l.searchbar=s.first)}},decls:21,vars:1,consts:[["fixed",""],["size","10"],["value","RDYxjMVR7t36E","cancel-button-text","Donwload","cancel-button-icon","trash","placeholder","PlayListId"],["size","2"],["expand","block",3,"click"],[3,"willDismiss"],["viewPlayList",""],["DownloadMusic",""],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","6",4,"ngFor","ngForOf"],["slot","start"],[3,"click"],["slot","end"],[3,"strong","click"],[1,"ion-padding"],["alt","",3,"src"],[3,"inset"],[4,"ngFor","ngForOf"],["alt","Silhouette of mountains",3,"src"],[3,"buffer","value"],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","6"],[3,"data"]],template:function(o,l){1&o&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3,"PlayListDownload"),i.qZA()()(),i.TgZ(4,"ion-content")(5,"ion-grid",0)(6,"ion-row")(7,"ion-col",1),i._UZ(8,"ion-searchbar",2),i.qZA(),i.TgZ(9,"ion-col",3)(10,"ion-button",4),i.NdJ("click",function(){return l.find()}),i._uU(11," Buscar "),i.qZA()()()(),i.TgZ(12,"ion-modal",5,6),i.NdJ("willDismiss",function(a){return l.onWillDismiss(a)}),i.YNc(14,Y,18,5,"ng-template"),i.qZA(),i.TgZ(15,"ion-modal",5,7),i.NdJ("willDismiss",function(a){return l.onWillDismiss(a)}),i.YNc(17,F,11,4,"ng-template"),i.qZA(),i.TgZ(18,"ion-grid",0)(19,"ion-row"),i.YNc(20,Q,2,1,"ion-col",8),i.qZA()()()),2&o&&(i.xp6(20),i.Q6J("ngForOf",l.playlists))},dependencies:[n.YG,n.Sm,n.PM,n.FN,n.Zi,n.tO,n.Dq,n.wI,n.W2,n.jY,n.Gu,n.Ie,n.Q$,n.q_,n.X7,n.Nd,n.VI,n.wd,n.sr,n.ki,n.j9,_.sg,z]}),t})()}];let q=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[T.Bz.forChild(k),T.Bz]}),t})();var S=d(5642);let H=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=i.oAB({type:t}),t.\u0275inj=i.cJS({imports:[n.Pc,_.ez,M.u5,q,S.K]}),t})()}}]);