"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5001],{5001:(K,Z,d)=>{d.r(Z),d.d(Z,{PlayListDownloadPageModule:()=>E});var _=d(6895),L=d(433),n=d(4556),T=d(7551),r=d(655),M=d(3983),i=d(8256),C=d(6841),A=d(9449),b=d(2601),D=d(5126);function I(s,a){if(1&s){const t=i.EpF();i.TgZ(0,"ion-button",1),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.stop())}),i._UZ(1,"ion-icon",10),i.qZA()}}function G(s,a){if(1&s){const t=i.EpF();i.TgZ(0,"ion-button",1),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.play())}),i._UZ(1,"ion-icon",11),i.qZA()}}function k(s,a){if(1&s){const t=i.EpF();i.TgZ(0,"ion-col",12)(1,"music",13,14),i.NdJ("OnEnd",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.musicaTerminou())}),i.qZA()()}if(2&s){const t=a.$implicit;i.xp6(1),i.Q6J("data",t)}}let N=(()=>{class s{constructor(t){this.storage=t,this.musicas=[]}ngOnInit(){var t;return(0,r.mG)(this,void 0,void 0,function*(){null==(yield this.storage.get("musics"))&&(yield this.storage.set("musics",this.musicas)),this.musicas=yield this.storage.get("musics");let l=[],o="";for(o of this.musicas)-1!=this.data.video_ids.indexOf(null!==(t=o.videoId)&&void 0!==t?t:"")&&l.push(o);this.musicas=l,this.tocando=!1,this.tocando_id=0})}ngAfterViewInit(){console.log(this.musicasContainer.toArray()),this.MusicTocando=this.musicasContainer.toArray()[this.tocando_id]}musicaTerminou(){this.proximo()}loadPosition(){this.MusicTocando=this.musicasContainer.toArray()[this.tocando_id]}play(){return(0,r.mG)(this,void 0,void 0,function*(){this.loadPosition(),yield this.MusicTocando.playPause(),this.MusicTocando.tocando=!0,this.tocando=!0})}stop(){return(0,r.mG)(this,void 0,void 0,function*(){this.tocando&&(this.tocando=!1,this.MusicTocando.player.stop(),this.MusicTocando.tocando=!1)})}anterior(){return(0,r.mG)(this,void 0,void 0,function*(){this.tocando_id-1==-1&&(this.tocando_id=this.musicasContainer.length-1),this.tocando_id-=1,this.stop(),this.play()})}proximo(){return(0,r.mG)(this,void 0,void 0,function*(){this.tocando_id==this.musicasContainer.length-1&&(this.tocando_id=0),this.tocando_id+=1,this.stop(),this.play()})}}return s.\u0275fac=function(t){return new(t||s)(i.Y36(b.Ke))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-playlist"]],viewQuery:function(t,l){if(1&t&&i.Gf(D.V,5),2&t){let o;i.iGM(o=i.CRH())&&(l.musicasContainer=o)}},inputs:{data:"data"},decls:27,vars:6,consts:[[3,"alt","src"],["expand","block",3,"click"],["slot","icon-only","name","play-skip-back-sharp"],["expand","block",3,"click",4,"ngIf","ngIfElse"],["elseBlock",""],["slot","icon-only","name","play-skip-forward-sharp"],["value","first"],["slot","header","color","light"],["slot","content",1,"ion-padding"],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","4",4,"ngFor","ngForOf"],["name","pause-circle-outline"],["name","play-circle-outline"],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","4"],[3,"data","OnEnd"],["musica",""]],template:function(t,l){if(1&t&&(i.TgZ(0,"ion-card"),i._UZ(1,"img",0),i.TgZ(2,"ion-card-header")(3,"ion-card-title"),i._uU(4),i.qZA()(),i.TgZ(5,"ion-card-content")(6,"ion-grid")(7,"ion-row")(8,"ion-col")(9,"ion-button",1),i.NdJ("click",function(){return l.anterior()}),i._UZ(10,"ion-icon",2),i.qZA()(),i.TgZ(11,"ion-col"),i.YNc(12,I,2,0,"ion-button",3),i.YNc(13,G,2,0,"ng-template",null,4,i.W1O),i.qZA(),i.TgZ(15,"ion-col")(16,"ion-button",1),i.NdJ("click",function(){return l.proximo()}),i._UZ(17,"ion-icon",5),i.qZA()()()()(),i.TgZ(18,"ion-accordion-group")(19,"ion-accordion",6)(20,"ion-item",7)(21,"ion-label"),i._uU(22,"Musicas"),i.qZA()(),i.TgZ(23,"div",8)(24,"ion-grid")(25,"ion-row"),i.YNc(26,k,3,1,"ion-col",9),i.qZA()()()()()()),2&t){const o=i.MAs(14);i.xp6(1),i.s9C("alt",l.data.title),i.s9C("src",l.data.thumbnail,i.LSH),i.xp6(3),i.Oqu(l.data.title),i.xp6(8),i.Q6J("ngIf",l.tocando)("ngIfElse",o),i.xp6(14),i.Q6J("ngForOf",l.musicas)}},dependencies:[n.We,n.eh,n.YG,n.PM,n.FN,n.Zi,n.Dq,n.wI,n.jY,n.gu,n.Ie,n.Q$,n.Nd,_.sg,_.O5,D.V]}),s})();const O=["viewPlayList"],J=["DownloadMusic"];function z(s,a){if(1&s&&(i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2),i.qZA()()),2&s){const t=a.$implicit;i.xp6(2),i.Oqu(null==t||null==t.snippet?null:t.snippet.title)}}function U(s,a){if(1&s){const t=i.EpF();i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",9)(3,"ion-button",10),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.cancel())}),i._uU(4,"Cancel"),i.qZA()(),i.TgZ(5,"ion-title"),i._uU(6),i.qZA(),i.TgZ(7,"ion-buttons",11)(8,"ion-button",12),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.confirm())}),i._uU(9,"Confirm"),i.qZA()()()(),i.TgZ(10,"ion-content",13)(11,"ion-card"),i._UZ(12,"img",14)(13,"ion-card-header"),i.TgZ(14,"ion-card-content")(15,"ion-item")(16,"ion-list",15),i.YNc(17,z,3,1,"ion-item",16),i.qZA()()()()()}if(2&s){const t=i.oxw();i.xp6(6),i.Oqu(null==t.model_vars||null==t.model_vars.playlist_info||null==t.model_vars.playlist_info.snippet?null:t.model_vars.playlist_info.snippet.title),i.xp6(2),i.Q6J("strong",!0),i.xp6(4),i.s9C("src",null==t.model_vars||null==t.model_vars.playlist_info||null==t.model_vars.playlist_info.snippet||null==t.model_vars.playlist_info.snippet.thumbnails||null==t.model_vars.playlist_info.snippet.thumbnails.maxres?null:t.model_vars.playlist_info.snippet.thumbnails.maxres.url,i.LSH),i.xp6(4),i.Q6J("inset",!0),i.xp6(1),i.Q6J("ngForOf",t.videos)}}function F(s,a){if(1&s){const t=i.EpF();i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",9)(3,"ion-button",10),i.NdJ("click",function(){i.CHM(t);const o=i.oxw();return i.KtG(o.cancelDownload())}),i._uU(4,"Parar"),i.qZA()()()(),i.TgZ(5,"ion-content",13)(6,"ion-card"),i._UZ(7,"img",17),i.TgZ(8,"ion-card-header")(9,"ion-card-title"),i._uU(10),i.qZA(),i.TgZ(11,"ion-card-subtitle"),i._uU(12),i.qZA()(),i.TgZ(13,"ion-card-content"),i._UZ(14,"ion-progress-bar",18),i.qZA()()()}if(2&s){const t=i.oxw();i.xp6(7),i.s9C("src",null==t.model_vars||null==t.model_vars.video_atual||null==t.model_vars.video_atual.snippet||null==t.model_vars.video_atual.snippet.thumbnails||null==t.model_vars.video_atual.snippet.thumbnails.maxres?null:t.model_vars.video_atual.snippet.thumbnails.maxres.url,i.LSH),i.xp6(3),i.hij("",t.model_vars.cancelar?"PARANDO":"DOWNLOADING"," ..."),i.xp6(2),i.Oqu(null==t.model_vars||null==t.model_vars.video_atual||null==t.model_vars.video_atual.snippet?null:t.model_vars.video_atual.snippet.title),i.xp6(2),i.Q6J("buffer",0)("value",t.model_vars.progress)}}function q(s,a){if(1&s){const t=i.EpF();i.TgZ(0,"ion-col",19)(1,"ion-toolbar")(2,"ion-buttons",11)(3,"ion-button",20),i.NdJ("click",function(){const e=i.CHM(t).index,m=i.oxw();return i.KtG(m.removerPlayList(e))}),i._UZ(4,"ion-icon",21),i.qZA()()(),i._UZ(5,"app-playlist",22),i.qZA()}if(2&s){const t=a.$implicit;i.xp6(3),i.Q6J("strong",!0),i.xp6(2),i.Q6J("data",t)}}const Y=[{path:"",component:(()=>{class s{constructor(t,l,o){this.ytbInfo=t,this.YtbMusicDownload=l,this.storage=o,this.musicas=[],this.musicas_ids=[],this.playlists=[],this.videos=[],this.model_vars={playlist_info:{},playlist_ids:[],video_atual:{},img_source:"",title:"",author:"",progress:.1,cancelar:!1}}getPlayListLink(t){var l,o;let m=(null!==(l=t.split("https://www.youtube.com/watch?")[1])&&void 0!==l?l:"").split("&"),u="";for(let p of m)-1!=p.indexOf("list=")&&(u=null!==(o=p.split("list=")[1])&&void 0!==o?o:"");return u}find(){return(0,r.mG)(this,void 0,void 0,function*(){if(this.searchbar.value){let t=this.searchbar.value,l=this.getPlayListLink(t);""!=l&&(t=l);let o=yield this.ytbInfo.getPlayList(t),e=yield this.ytbInfo.getPlayListItems(t);(null==e?void 0:e.items.length)>0&&(this.model_vars.playlist_info=null==o?void 0:o.items[0],this.videos=null==e?void 0:e.items,this.modal.present())}})}save(){return(0,r.mG)(this,void 0,void 0,function*(){yield this.storage.set("playlists",this.playlists),yield this.storage.set("musics",this.musicas)})}checkifExist(t){return!1}ngOnInit(){return(0,r.mG)(this,void 0,void 0,function*(){null==(yield this.storage.get("playlists"))&&(yield this.storage.set("playlists",this.playlists)),null==(yield this.storage.get("musics"))&&(yield this.storage.set("musics",this.musicas)),this.musicas=yield this.storage.get("musics");for(let t of this.musicas)this.musicas_ids.push(t.videoId);this.playlists=yield this.storage.get("playlists")})}cancel(){this.modal.dismiss(null,"cancel")}cancelDownload(){this.model_vars.cancelar=!0,this.modal.dismiss(null,"cancel")}removerPlayList(t){return(0,r.mG)(this,void 0,void 0,function*(){this.playlists.splice(t,1),yield this.storage.set("playlists",this.playlists)})}confirm(){return(0,r.mG)(this,void 0,void 0,function*(){this.downloadPlayList()})}onWillDismiss(t){console.log(t)}download_music(t){var l,o;return(0,r.mG)(this,void 0,void 0,function*(){let e=yield this.YtbMusicDownload.getMusic(t);if(null==e)return;for(;"finished"!=e.stats;){let u=null===(l=e.progress)||void 0===l?void 0:l.estimative;null==u&&(u=3e3),yield new Promise(p=>setTimeout(p,u)),e=yield this.YtbMusicDownload.getMusic(t)}let m=M.s.compress(null!==(o=e.file)&&void 0!==o?o:"");yield this.storage.set(`m-c-${e.videoId}`,m),e.file=`m-c-${e.videoId}`,this.musicas.push(e),this.save()})}downloadPlayList(){var t,l,o,e,m,u,p,v,h,g,f,y,P,w;return(0,r.mG)(this,void 0,void 0,function*(){this.model_vars.cancelar=!1,this.model_vars.playlist_ids=[],this.modalMusicDownload.present(),this.modal.dismiss();let x=1;for(let c of this.videos){if(this.model_vars.cancelar)return void this.modalMusicDownload.dismiss();this.modalMusicDownload.isOpen||this.modalMusicDownload.present(),this.model_vars.progress=x/this.videos.length,this.model_vars.video_atual=c,-1==this.musicas_ids.indexOf(null===(l=null===(t=null==c?void 0:c.snippet)||void 0===t?void 0:t.resourceId)||void 0===l?void 0:l.videoId)?yield this.download_music(null===(e=null===(o=null==c?void 0:c.snippet)||void 0===o?void 0:o.resourceId)||void 0===e?void 0:e.videoId):console.log(`${null===(u=null===(m=null==c?void 0:c.snippet)||void 0===m?void 0:m.resourceId)||void 0===u?void 0:u.videoId} ja existe`),this.model_vars.playlist_ids.push(null===(v=null===(p=null==c?void 0:c.snippet)||void 0===p?void 0:p.resourceId)||void 0===v?void 0:v.videoId),x+=1}let S={title:null===(g=null===(h=this.model_vars.playlist_info)||void 0===h?void 0:h.snippet)||void 0===g?void 0:g.title,video_ids:this.model_vars.playlist_ids,videos:[],thumbnail:null===(w=null===(P=null===(y=null===(f=this.model_vars.playlist_info)||void 0===f?void 0:f.snippet)||void 0===y?void 0:y.thumbnails)||void 0===P?void 0:P.high)||void 0===w?void 0:w.url};this.playlists.push(S),this.save(),this.modalMusicDownload.dismiss()})}}return s.\u0275fac=function(t){return new(t||s)(i.Y36(C.I),i.Y36(A.s),i.Y36(b.Ke))},s.\u0275cmp=i.Xpm({type:s,selectors:[["app-play-list-download"]],viewQuery:function(t,l){if(1&t&&(i.Gf(O,7),i.Gf(J,7),i.Gf(n.VI,5)),2&t){let o;i.iGM(o=i.CRH())&&(l.modal=o.first),i.iGM(o=i.CRH())&&(l.modalMusicDownload=o.first),i.iGM(o=i.CRH())&&(l.searchbar=o.first)}},decls:21,vars:1,consts:[["fixed",""],["size","10"],["value","RDYxjMVR7t36E","cancel-button-text","Donwload","cancel-button-icon","trash","placeholder","PlayListId"],["size","2"],["expand","block",3,"click"],[3,"willDismiss"],["viewPlayList",""],["DownloadMusic",""],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","6",4,"ngFor","ngForOf"],["slot","start"],["fill","solid","color","danger",3,"click"],["slot","end"],["fill","solid","color","success",3,"strong","click"],[1,"ion-padding"],["alt","",3,"src"],[3,"inset"],[4,"ngFor","ngForOf"],["alt","Silhouette of mountains",3,"src"],[3,"buffer","value"],["sizeXs","12","sizeSm","12","sizeMd","6","sizeLg","6"],["fill","solid","color","danger",3,"strong","click"],["name","trash-outline"],[3,"data"]],template:function(t,l){1&t&&(i.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),i._uU(3,"PlayListDownload"),i.qZA()()(),i.TgZ(4,"ion-content")(5,"ion-grid",0)(6,"ion-row")(7,"ion-col",1),i._UZ(8,"ion-searchbar",2),i.qZA(),i.TgZ(9,"ion-col",3)(10,"ion-button",4),i.NdJ("click",function(){return l.find()}),i._uU(11," Buscar "),i.qZA()()()(),i.TgZ(12,"ion-modal",5,6),i.NdJ("willDismiss",function(e){return l.onWillDismiss(e)}),i.YNc(14,U,18,5,"ng-template"),i.qZA(),i.TgZ(15,"ion-modal",5,7),i.NdJ("willDismiss",function(e){return l.onWillDismiss(e)}),i.YNc(17,F,15,5,"ng-template"),i.qZA(),i.TgZ(18,"ion-grid",0)(19,"ion-row"),i.YNc(20,q,6,2,"ion-col",8),i.qZA()()()),2&t&&(i.xp6(20),i.Q6J("ngForOf",l.playlists))},dependencies:[n.YG,n.Sm,n.PM,n.FN,n.Zi,n.tO,n.Dq,n.wI,n.W2,n.jY,n.Gu,n.gu,n.Ie,n.Q$,n.q_,n.X7,n.Nd,n.VI,n.wd,n.sr,n.ki,n.j9,_.sg,N]}),s})()}];let Q=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[T.Bz.forChild(Y),T.Bz]}),s})();var H=d(5642);let E=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=i.oAB({type:s}),s.\u0275inj=i.cJS({imports:[n.Pc,_.ez,L.u5,Q,H.K]}),s})()}}]);